import{_ as i,c as a,o as e,af as l}from"./chunks/framework.W5ZyBR1w.js";const c=JSON.parse('{"title":"docker基本使用","description":"","frontmatter":{"dg-publish":true},"headers":[],"relativePath":"backEnd/database/mysql上云.md","filePath":"backEnd/database/mysql上云.md"}'),h={name:"backEnd/database/mysql上云.md"};function t(n,s,k,r,d,p){return e(),a("div",null,[...s[0]||(s[0]=[l(`<p>#mysql #docker</p><h1 id="docker基本使用" tabindex="-1">docker基本使用 <a class="header-anchor" href="#docker基本使用" aria-label="Permalink to “docker基本使用”">​</a></h1><p>由于国内ban掉了docker hub，所以需要先修改docker的镜像源 基本的docker 命令：</p><blockquote><p>run Create and run a new container from an image exec Execute a command in a running container ps List containers build Build an image from a Dockerfile pull Download an image from a registry push Upload an image to a registry images List images login Authenticate to a registry logout Log out from a registry search Search Docker Hub for images version Show the Docker version information info Display system-wide information</p></blockquote><p>基本的使用： docker pull -&gt; docker run [image] -args -&gt; docker container (监控运行时的容器信息)</p><h1 id="配置mysql在docker上运行的命令" tabindex="-1">配置mysql在docker上运行的命令 <a class="header-anchor" href="#配置mysql在docker上运行的命令" aria-label="Permalink to “配置mysql在docker上运行的命令”">​</a></h1><h2 id="case-1基本命令" tabindex="-1">case:1基本命令 <a class="header-anchor" href="#case-1基本命令" aria-label="Permalink to “case:1基本命令”">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> some-mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13306:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123456</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><ul><li><code>--name some-mysql</code>：为容器指定一个名称，这里我们命名为<code>some-mysql</code>。</li><li><code>-p 13306:3306</code>：将容器的3306端口映射到宿主机的13306端口。</li><li><code>-e MYSQL_ROOT_PASSWORD=123456</code>：设置环境变量<code>MYSQL_ROOT_PASSWORD</code>为<code>123456</code>，这是root用户的密码。</li><li><code>-d</code>：以守护态（后台运行）运行容器。</li><li><code>mysql</code>：指定要运行的镜像名称。</li></ul><h2 id="case-2持久化存储和自动重启" tabindex="-1">case:2持久化存储和自动重启 <a class="header-anchor" href="#case-2持久化存储和自动重启" aria-label="Permalink to “case:2持久化存储和自动重启”">​</a></h2><ul><li>在docker运行时附加命令<code>docker exec my_container command_name --additional-arguments</code></li></ul><p>为了让MySQL的数据在宿主机上得以持久化，即使容器停运或删除，通过使用数据卷挂载来实现这一目标</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> some-mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13306:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123456</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/mysql/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><p>这里 <code>-v /path/to/mysql/data:/var/lib/mysql</code> 表示将宿主机的 <code>/path/to/mysql/data</code> 目录挂载到容器的 <code>/var/lib/mysql</code> 目录，这是MySQL的默认数据存储位置。</p><h2 id="case-3设置远程访问权限" tabindex="-1">case:3设置远程访问权限 <a class="header-anchor" href="#case-3设置远程访问权限" aria-label="Permalink to “case:3设置远程访问权限”">​</a></h2><p>这里建议新建一个专门用于远程访问的用户控制访问权限，防止被勒索。</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">authorize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verify_user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&#39;@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;TempPass123!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GRANT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authorize.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;verify_user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FLUSH PRIVILEGES;</span></span></code></pre></div><p>解释：</p><ul><li>创建<code>verify_user</code>专门用于访问authorize数据库</li><li>通过<code>GRANT ...</code>赋予相关数据库权限</li></ul><h2 id="参考文献" tabindex="-1">参考文献 <a class="header-anchor" href="#参考文献" aria-label="Permalink to “参考文献”">​</a></h2><p><a href="https://www.oryoy.com/news/ru-he-zai-docker-rong-qi-zhong-pei-zhi-mysql-bing-yun-xu-su-zhu-ji-fang-wen-shu-ju-ku.html" target="_blank" rel="noreferrer">1.如何在Docker容器中配置MySQL并允许宿主机访问数据库</a><a href="https://www.jasonzk.com/tech/mysqlcreateuser/" target="_blank" rel="noreferrer">2.在MySQL中创建用户并赋予远程登录权限</a></p>`,21)])])}const g=i(h,[["render",t]]);export{c as __pageData,g as default};
