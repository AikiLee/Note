
## 1.配置和测试覆盖率

核心： `vue/test-utils` + `vitest`

## 2.基本用法

首先需要掌握vue test utils的基本用法：

- wrapper
	+ DomWrapper, 如果通过find/findAll/wrapper/get/返回的数据就是Dom元素，可以是用原生的方法如.classer()/.attributes()/.emits()/.exists()/.isVisible/...直接访问DOM 属性
	+ VueWrapper，通过fidComponentsxxx,对于这样的vue组件，我们通过props来访问props属性
- mount:使用这个来渲染一个组件，同时还可以指定传入参数
	```js
	test('creates a todo', async () => { const wrapper = mount(TodoApp) await wrapper.get('[data-test="new-todo"]').setValue('New todo') await wrapper.get('[data-test="form"]').trigger('submit') expect(wrapper.findAll('[data-test="todo"]')).toHaveLength(2) })
	```
- find/filter

- trigger
	+ 断言事件
		```js
		//这里简单分析一下，就是
		test('emits an event when clicked', () => {
		  const wrapper = mount(Counter)
		  wrapper.find('button').trigger('click')
		  wrapper.find('button').trigger('click')
		  expect(wrapper.emitted()).toHaveProperty('increment')
		})
		```
- Form
### describe + it

这是一种描述测试用例的方式：例如it("should be right", async () => {xxx})

### describe + test
这也是描述测试用例的方式：例如test("it should be wrong, ()=> {xxx})

### 断言

这里则是vitest中提供的方法：

#### Except

捕获断言对象并可以对断言对象执行操作，例如：

```js
import { expect, test } from 'vitest'

const stock = {
  type: 'apples',
  count: 13,
}

test('stock has 13 apples', () => {
  expect(stock.type).toBe('apples')
  expect(stock.count).toBe(13)
})

test('stocks are the same', () => {
  const refStock = stock // same reference

  expect(stock).toBe(refStock)
})
```


#### 断言api

常用的有:
```js
// toBe 基于Object.is进行判断，先判断对象相同，然后值相同
except(xxx.xxx).toBe(3)
except(Object.is(xxx.xxx,3)).toBe(true); //如果时两个空的[] []，那么返回值也是false
//单纯想比较值的话，请使用 toEqual()

//toBeDefine 检查函数是否有返回值
except(Function()).toBeDefine();

// toBeTruthy 检测返回的值能否为true；这里可以补充，js中：false, 0, -0,0n,null.undefined,"", document.all都是false
const stocks = new Stocks() test('if we know Bill stock, sell apples to him', () => { stocks.sync('Bill') expect(stocks.getInfo('Bill')).toBeTruthy() })

// toContain 断言实际值是否在数组中，当然也可以判断字符串是否在子串中

// toHaveLength 断言返回值是否含.length属性

//toHaveBeenCalled 检测函数是否被调用

```

### VI

Vitest 通过其 `vi` 辅助工具提供实用功能来帮助你。可以全局访问它（当启用 [globals 配置](https://cn.vitest.dev/config/#globals) 时），也可以直接从 `vitest` 中导入

常用的有： vi.fn()